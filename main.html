<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Aerakos ‚Äì Greek Clan</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@300;400;600&display=swap"
    rel="stylesheet"
  />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://threejs.org/examples/js/loaders/MTLLoader.js"></script>
  <script src="https://threejs.org/examples/js/loaders/OBJLoader.js"></script>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{background:#001c2f;color:#e4d5b7;font-family:'Cinzel',serif;font-weight:300;overflow-x:hidden;min-height:100vh}
    nav{position:fixed;top:0;width:100%;padding:30px 50px;background:linear-gradient(to bottom,rgba(0,28,47,0.9),transparent);backdrop-filter:blur(10px);z-index:1000;transition:all .3s ease}
    nav.scrolled{padding:20px 50px;background:rgba(0,28,47,0.95)}
    .nav-container{display:flex;justify-content:space-between;align-items:center;max-width:1400px;margin:0 auto}
    .logo-nav{height:60px;filter:drop-shadow(0 0 20px rgba(228,213,183,0.5))}
    .nav-links{display:flex;gap:40px;list-style:none}
    .nav-links a{color:#e4d5b7;text-decoration:none;font-size:14px;letter-spacing:3px;text-transform:uppercase;position:relative;transition:all .3s ease}
    .nav-links a::after{content:'';position:absolute;bottom:-5px;left:0;width:0;height:2px;background:linear-gradient(90deg,transparent,#e4d5b7,transparent);transition:width .3s ease}
    .nav-links a:hover::after{width:100%}
    .hero{min-height:100vh;display:flex;align-items:center;justify-content:center;position:relative;padding:120px 50px 80px}
    .hero-content{text-align:center;max-width:1200px;width:100%}
    .greek-title{font-size:20px;letter-spacing:8px;margin-bottom:20px;opacity:.7;animation:fadeIn 1s ease}
    .clan-name{font-size:120px;font-weight:600;letter-spacing:15px;margin-bottom:30px;background:linear-gradient(135deg,#e4d5b7,#fff,#e4d5b7);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;animation:shimmer 3s infinite linear;background-size:200% 200%;filter:drop-shadow(0 0 30px rgba(228,213,183,0.5))}
    @keyframes shimmer{0%{background-position:0% 50%}100%{background-position:200% 50%}}
    .founder-section{margin:80px 0;position:relative}
    .founder-container{display:flex;align-items:center;justify-content:center;gap:100px;flex-wrap:wrap}
    .avatar-wrapper{position:relative;animation:fadeIn 1s ease .6s both}
    .avatar-container{width:350px;height:350px;position:relative;cursor:grab}
    .avatar-container:active{cursor:grabbing}
    .greek-border{position:absolute;inset:-30px;border:3px solid #e4d5b7;border-radius:50%;opacity:.3;animation:rotate 20s linear infinite}
    .greek-border::before,.greek-border::after{content:'';position:absolute;inset:10px;border:1px solid #e4d5b7;border-radius:50%;opacity:.5}
    .avatar-3d{width:100%;height:100%;position:relative;transform-style:preserve-3d;transition:transform .1s ease;transform:perspective(1000px) rotateX(-10deg) rotateY(0deg)}
    .avatar-frame{width:100%;height:100%;background:radial-gradient(circle at center,rgba(228,213,183,.1),transparent),conic-gradient(from 0deg,#e4d5b7,#001c2f,#e4d5b7,#001c2f,#e4d5b7);border-radius:50%;display:flex;align-items:center;justify-content:center;position:relative;padding:5px;animation:glow 3s ease-in-out infinite;transform:translateZ(50px);box-shadow:0 0 30px rgba(228,213,183,.5),0 10px 40px rgba(0,0,0,.4)}
    @keyframes glow{0%,100%{box-shadow:0 0 30px rgba(228,213,183,.5)}50%{box-shadow:0 0 50px rgba(228,213,183,.8)}}
    .avatar-inner{width:100%;height:100%;background:#001c2f;border-radius:50%;padding:20px;display:flex;align-items:center;justify-content:center;overflow:hidden}
    #avatarCanvas{width:100%!important;height:100%!important;border-radius:50%}
    .loading-spinner{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:50px;height:50px;border:3px solid rgba(228,213,183,.3);border-top:3px solid #e4d5b7;border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{0%{transform:translate(-50%,-50%) rotate(0deg)}100%{transform:translate(-50%,-50%) rotate(360deg)}}
    .founder-info{text-align:left;animation:fadeIn 1s ease .9s both}
    .founder-info h2{font-size:48px;margin-bottom:15px;letter-spacing:5px;font-weight:600}
    .founder-info .title{font-size:20px;opacity:.8;letter-spacing:4px;text-transform:uppercase;margin-bottom:10px}
    .founder-info .title::before{content:'ŒëŒ°ŒßŒ©Œù';display:block;font-size:16px;opacity:.6;margin-bottom:5px}
    .greek-divider{width:200px;height:2px;background:linear-gradient(90deg,transparent,#e4d5b7,transparent);margin:30px 0}
    .greek-ornament{position:absolute;font-size:60px;opacity:.1;color:#e4d5b7;animation:float 10s ease-in-out infinite}
    .ornament-1{top:20%;left:10%;animation-delay:0s}
    .ornament-2{top:70%;right:10%;animation-delay:3s}
    .ornament-3{bottom:20%;left:15%;animation-delay:6s}
    @keyframes float{0%,100%{transform:translateY(0) rotate(0deg)}50%{transform:translateY(-20px) rotate(10deg)}}
    @keyframes fadeIn{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
    @keyframes rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
    @media(max-width:968px){.clan-name{font-size:72px}.founder-container{gap:50px}.founder-info{text-align:center}.greek-divider{margin:30px auto}}
  </style>
</head>
<body>
  <nav id="navbar">
    <div class="nav-container">
      <img src="https://i.imgur.com/OCkpXbi.png" class="logo-nav" alt="Aerakos">
      <ul class="nav-links">
        <li><a href="#home">Pantheon</a></li>
        <li><a href="#clan">The Clan</a></li>
        <li><a href="#battles">Battles</a></li>
        <li><a href="#join">Join Us</a></li>
      </ul>
    </div>
  </nav>

  <section class="hero">
    <div class="hero-content">
      <p class="greek-title">ŒöŒõŒëŒù ŒëŒïŒ°ŒëŒöŒüŒ£</p>
      <h1 class="clan-name">AERAKOS</h1>

      <div class="founder-section">
        <div class="founder-container">
          <div class="avatar-wrapper">
            <div id="avatarContainer" class="avatar-container">
              <div class="greek-border"></div>
              <div class="avatar-3d">
                <div class="avatar-frame">
                  <div class="avatar-inner">
                    <div id="loadingSpinner" class="loading-spinner"></div>
                    <canvas id="avatarCanvas"></canvas>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="founder-info">
            <h2>RESTLESSSPELL</h2>
            <p class="title">Archon of Aerakos</p>
            <div class="greek-divider"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="greek-ornament ornament-1">‚öî</div>
    <div class="greek-ornament ornament-2">üõ°</div>
    <div class="greek-ornament ornament-3">‚ö°</div>
  </section>

  <script>
    let scene, camera, renderer, robloxModel;
    const userId = 26223338;
    const proxyBase = 'https://billowing-cake-52a0.beamazed9000.workers.dev';

    function cdnUrl(hash) {
      let i = 31;
      for (let t = 0; t < hash.length && t < 38; t++) {
        i ^= hash.charCodeAt(t);
      }
      return `https://t${i % 8}.rbxcdn.com/${hash}`;
    }

    function initThreeJS() {
      const canvas = document.getElementById('avatarCanvas');
      const container = document.querySelector('.avatar-inner');
      const w = container.clientWidth;
      const h = container.clientHeight;
      scene = new THREE.Scene();
      scene.background = null;
      camera = new THREE.PerspectiveCamera(45, w/h, 0.1, 1000);
      camera.position.set(0, 0, 5);
      renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
      renderer.setSize(w, h);
      renderer.setPixelRatio(window.devicePixelRatio);
      scene.add(new THREE.AmbientLight(0xffffff, 0.6));
      const d1 = new THREE.DirectionalLight(0xffffff, 0.8);
      d1.position.set(5, 5, 5);
      scene.add(d1);
      const d2 = new THREE.DirectionalLight(0xe4d5b7, 0.4);
      d2.position.set(-5, 5, -5);
      scene.add(d2);
      loadRobloxAvatar();
    }

    async function loadRobloxAvatar() {
      try {
        const res = await fetch(`${proxyBase}/api/avatar3d?userId=${userId}`);
        const { data } = await res.json();
        const req = data[0];
        if (req.state !== 'Completed') {
          setTimeout(loadRobloxAvatar, 2000);
          return;
        }
        const md = await (await fetch(
          `${proxyBase}/api/model?url=${encodeURIComponent(req.imageUrl)}`
        )).json();
        const objUrl = cdnUrl(md.obj);
        const mtlUrl = cdnUrl(md.mtl);
        loadOBJWithMTL(objUrl, mtlUrl);
      } catch {
        createPlaceholderAvatar();
      }
    }

    function loadOBJWithMTL(objUrl, mtlUrl) {
      document.getElementById('loadingSpinner').style.display = 'none';

      new THREE.MTLLoader()
        .setResourcePath('')
        .load(
          mtlUrl,
          materials => {
            materials.preload();
            const manager = new THREE.LoadingManager();
            manager.setURLModifier(url => {
              const hash = url.split('.com/').pop();
              return cdnUrl(hash);
            });
            const objLoader = new THREE.OBJLoader(manager);
            objLoader.setMaterials(materials);
            objLoader.load(objUrl, onObjectLoaded, null, createPlaceholderAvatar);
          },
          null,
          createPlaceholderAvatar
        );
    }

    function onObjectLoaded(o) {
      const center = new THREE.Box3().setFromObject(o).getCenter(new THREE.Vector3());
      o.position.sub(center);
      scene.add(o);
      robloxModel = o;
      animate();
    }

    function createPlaceholderAvatar() {
      document.getElementById('loadingSpinner').style.display = 'none';
      const geo = new THREE.BoxGeometry(1, 1, 1);
      const mat = new THREE.MeshPhongMaterial({ color: 0xe4d5b7, emissive: 0xe4d5b7, emissiveIntensity: 0.2 });
      const cube = new THREE.Mesh(geo, mat);
      scene.add(cube);
      robloxModel = cube;
      animate();
    }

    function animate() {
      requestAnimationFrame(animate);
      if (robloxModel && !isMouseDown) robloxModel.rotation.y += 0.005;
      renderer.render(scene, camera);
    }

    let isMouseDown = false, mouseX = 0, mouseY = 0, targetX = 0, targetY = 0;
    const avatarContainer = document.getElementById('avatarContainer');

    avatarContainer.addEventListener('mousedown', e => {
      isMouseDown = true; mouseX = e.clientX; mouseY = e.clientY;
    });

    document.addEventListener('mousemove', e => {
      if (!isMouseDown || !robloxModel) return;
      const dx = e.clientX - mouseX, dy = e.clientY - mouseY;
      targetY += dx * 0.01; targetX -= dy * 0.01;
      robloxModel.rotation.y = targetY;
      robloxModel.rotation.x = Math.max(-0.5, Math.min(0.5, targetX));
      mouseX = e.clientX; mouseY = e.clientY;
    });

    document.addEventListener('mouseup', () => { isMouseDown = false; });

    avatarContainer.addEventListener('touchstart', e => {
      isMouseDown = true; mouseX = e.touches[0].clientX; mouseY = e.touches[0].clientY;
    });

    avatarContainer.addEventListener('touchmove', e => {
      if (!isMouseDown || !robloxModel) return;
      const dx = e.touches[0].clientX - mouseX, dy = e.touches[0].clientY - mouseY;
      targetY += dx * 0.01; targetX -= dy * 0.01;
      robloxModel.rotation.y = targetY;
      robloxModel.rotation.x = Math.max(-0.5, Math.min(0.5, targetX));
      mouseX = e.touches[0].clientX; mouseY = e.touches[0].clientY;
    });

    avatarContainer.addEventListener('touchend', () => { isMouseDown = false; });

    window.addEventListener('resize', () => {
      const c = document.querySelector('.avatar-inner');
      const w = c.clientWidth, h = c.clientHeight;
      camera.aspect = w / h;
      camera.updateProjectionMatrix();
      renderer.setSize(w, h);
    });

    window.addEventListener('scroll', () => {
      document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 50);
    });

    window.addEventListener('load', initThreeJS);
  </script>
</body>
</html>
